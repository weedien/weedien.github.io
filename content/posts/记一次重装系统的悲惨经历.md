+++
title = '记一次重装系统的悲惨经历'
date = 2023-12-04T23:29:35+08:00
tags = ["os", "problemfix"]

slug = 'reinstall-windows'
+++

本来只想修改电脑用户名，没想到给我来了一次重装系统。

<!--more-->

起因是这样的：我想要修改电脑的用户名，默认为 31406，即登录邮箱的前五位，于是通过执行`netplwiz`进入到了用户账户管理页面，接着把用户名从 31406 修改为了`weedien`，但是，我后面犹豫了一下，把那条记录给删除了，原本想着点击取消就不会保存更改，但实际上更改被保存了，唯一的用户被删除了，但我再次运行`netplwiz`时已经没有权限了。

![image-20231130233120308](https://picgo-1314385327.cos.ap-guangzhou.myqcloud.com/markdown/image-20231130233120308.png)

![image-20231130232636868](https://picgo-1314385327.cos.ap-guangzhou.myqcloud.com/markdown/image-20231130232636868.png)

其实电脑中存在一个管理员用户，我可以通过管理员账号对所有的配置进行修改，但我无法切换到它，因为它默认不启用，需要通过`net user administrator /active:yes`命令来启用。当目前唯一的用户被设为了 Guest 之后，我无权进行任何需要管理员权限的指令，所以我基本上没有办法撤回上述操作带来的影响。

确实存在一种方法，即在电脑开机时通过`F8`键进入到一个界面，接着以安全模式启动电脑，根据网上的说法，安全模式下是具备管理员权限的，对用户的权限进行修改，理论上可以解决我遇见的问题。但是，我试图进入这个界面，但会遇见蓝屏错误，阻止我进入安全模式，后经排查，应该是驱动存在问题，我也怀疑是安装了一些破解版软件导致的，根据日志信息我很难定位到报错的实际位置，唯一的办法也失效了，

> 补充：除了在开机时按`F8`之外，还可以通过按住`shift`键点击重启按钮、以及<u>设置>Windows 更新>高级选项>恢复>高级启动>立即重新启动</u>，这两种方式来进入安全模式。

虽然没有了管理员权限，但我依然可以使用电脑的大部分功能，写代码和使用浏览器并不会受到影响。而一些比较明显的影响是，我无法使用 360 和启动游戏，这确实不太方便。最终思考了一下，似乎确实没有的方法来获取管理员权限了，只有重装系统这一条路了。

重装系统的过程，我使用到了[微 PE 工具箱](https://www.wepe.com.cn/)，将它安装到 U 盘中，它会占据 U 盘的部分内存，使得 U 盘显示的总内存变少，它不会以文件的形式存在 U 盘，安装之后，使用文件管理器打开 U 盘，里面仍是空的。之后将需要安装的镜像存入 U 盘即可。

在电脑启动时，通过按`F2`进入到引导界面，选择从 USB 启动，之后会进入到一个预备系统，一个叫 PE 的东西，也算是一个简易的操作系统，有图形界面，在该界面中可以对磁盘进行分区操作，还提供了一些系统工具。然后只要找到操作系统镜像文件，点击装载即可。

所以，U 盘应该还可以存储一些其他的个人文件，而不失去它重装系统的功能。

实际上，我的操作过程还是比较复杂的。因为将[微 PE 工具箱](https://www.wepe.com.cn/)安装到 USB 是需要管理员权限的，我目前无法使用管理员权限。于是我使用 vmware 运行了一个 windows 虚拟机，通过虚拟机将工具箱安装到 USB，之后再把镜像文件存入 USB。
